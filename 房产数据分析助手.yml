app:
  description: ''
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: æˆ¿äº§æ•°æ®åˆ†æåŠ©æ‰‹
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/tongyi:0.0.37@9e635dd61046ede51c76c174a0c7dc723616cd6698b18c0273c0ee11aeb9accd
kind: app
version: 0.3.1
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: 1754668187888-source-1754668203944-target
      source: '1754668187888'
      sourceHandle: source
      target: '1754668203944'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1754668203944-source-1754668210206-target
      source: '1754668203944'
      sourceHandle: source
      target: '1754668210206'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: llm
      id: 1754668210206-source-1754668216463-target
      source: '1754668210206'
      sourceHandle: source
      target: '1754668216463'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: end
      id: 1754668216463-source-1754668220799-target
      source: '1754668216463'
      sourceHandle: source
      target: '1754668220799'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: query
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: query
      height: 90
      id: '1754668187888'
      position:
        x: 30
        y: 245
      positionAbsolute:
        x: 30
        y: 245
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: qwen3-coder-plus
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: 796d8ba7-576f-405d-9d8d-b599406784bd
          role: system
          text: 'ä½ æ˜¯æ•°æ®åˆ†æä¸“å®¶ï¼Œç²¾é€šMySQLã€‚æ ¹æ®ç”¨æˆ·é—®é¢˜ç”ŸæˆSQLæŸ¥è¯¢ã€‚


            æ ¸å¿ƒè§„åˆ™ï¼š

            1. ä»…ä½¿ç”¨ç”¨æˆ·æåˆ°çš„è¡¨å’Œå­—æ®µ

            2. ç¡®ä¿SQLå…¼å®¹MySQL

            3. åªè¾“å‡ºä¸€ä¸ªå®Œæ•´SQLè¯­å¥ï¼Œç¡®ä¿è¾“å‡ºæ˜¯ä¸€ä¸ªå¯ç›´æ¥æ‰§è¡Œçš„SQLæ–‡æœ¬,ä¸å«æ³¨é‡Šç­‰å…¶å®ƒä»»ä½•å¤šä½™ä¿¡æ¯


            æ³¨æ„ï¼š

            - æ£€æŸ¥è¡¨åå’Œå­—æ®µåï¼Œä¸¥æ ¼æŒ‰ç…§è¡¨ç»“æ„æè¿°å†™ï¼Œæ¯”å¦‚ç”¨æˆ·æåˆ°å•ä»·ï¼Œä½ éœ€è¦å†™æˆå•ä»·ï¼ˆå…ƒï¼‰

            - å­—ç¬¦å­—æ®µç”¨LIKE N''%å…³é”®è¯%''

            - æ‰€æœ‰é™¤æ³•ç”¨æŒ‡å®šæ¨¡æ¿

            - æ ¹æ®éœ€æ±‚é€‰æ‹©æ­£ç¡®çš„èšåˆå‡½æ•°'
        - id: 902eef00-3b3a-494f-9eef-8019baa1a8f2
          role: user
          text: 'è¡¨ç»“æ„æè¿°ï¼š

            è¡¨åç§°ï¼šfangchang

            idï¼Œæ•´æ•°

            åœ°åŒº ï¼Œå­—ç¬¦ä¸²

            æˆ¿ä»·ï¼ˆä¸‡ï¼‰ï¼Œå°æ•°

            é…ç½®ï¼Œå­—ç¬¦ä¸²

            å¤§å°ï¼ˆå¹³ç±³ï¼‰ï¼Œå°æ•°

            å•ä»·ï¼ˆå…ƒï¼‰ï¼Œæ•´æ•°

            æ–¹ä½ï¼Œå­—ç¬¦ä¸²

            å±‚æ•°ï¼Œå­—ç¬¦ä¸²

            è£…ä¿®ï¼Œå­—ç¬¦ä¸²

            å…¶ä»–ï¼Œå­—ç¬¦ä¸²


            é—®é¢˜:{{#1754668187888.query#}}


            è¯·å°†é—®é¢˜è½¬æˆSQLè¯­å¥


            è¯·åªè¿”å›æ‰§è¡Œè¯­å¥

            ä¾‹å¦‚ï¼š SELECT * FROM fangchang WHERE price BETWEEN 50 AND 100;

            è¯·ä¸è¦æœ‰ä»»ä½•å…¶ä»–ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯å‰é¢ä¸èƒ½æœ‰sql\n,å¦åˆ™ä¼šå—åˆ°æƒ©ç½š'
        selected: false
        title: LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1754668203944'
      position:
        x: 334
        y: 245
      positionAbsolute:
        x: 334
        y: 245
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import requests\n\n# Flaskåº”ç”¨çš„åŸºç¡€URLï¼ˆéœ€è¦ä¿®æ”¹ï¼‰\nbase_url = 'http://host.docker.internal:5001'\
          \ # æ ¹æ®è‡ªå·±çš„ipåœ°å€ä¿®æ”¹\n\n# å®šä¹‰æµ‹è¯•å‡½æ•°\ndef main(sql_query):\n    # æ„é€ è¯·æ±‚çš„URLå’ŒæŸ¥è¯¢å‚æ•°\n\
          \    url = f'{base_url}/execute_query'\n    # å‘é€GETè¯·æ±‚ï¼Œå¹¶åŒ…å«æŸ¥è¯¢å‚æ•°\n    response\
          \ = requests.get(url,params={'sql_query':sql_query})\n    # æ‰“å°å“åº”å†…å®¹ï¼Œä»¥ä¾¿äºè°ƒè¯•\n\
          \    # print(response.json())\n\n    # æ£€æŸ¥å“åº”çŠ¶æ€ç æ˜¯å¦ä¸º200\n    assert response.status_code\
          \ == 200, f\"Expected status code 200, got {response.status_code}\"\n\n\
          \    # æ£€æŸ¥å“åº”å†…å®¹æ˜¯å¦ä¸ºJSONæ ¼å¼\n    assert response.headers['Content-Type'] == 'application/json',\
          \ \"Expected JSON response\"\n\n    # æ£€æŸ¥å“åº”å†…å®¹æ˜¯å¦åŒ…å«æ•°æ®\n    data = response.text\n\
          \n    # result = {i: sublist for i, sublist in enumerate(data)}\n\n    #\
          \ print(result,type(result))\n\n    return {'result':data}\n\n    assert\
          \ isinstance(data, list), \"Expected a list of results\"\n    assert len(data)\
          \ > 0, \"Expected non-empty list\""
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: ä»£ç æ‰§è¡Œ
        type: code
        variables:
        - value_selector:
          - '1754668203944'
          - text
          variable: sql_query
      height: 54
      id: '1754668210206'
      position:
        x: 638
        y: 245
      positionAbsolute:
        x: 638
        y: 245
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: qwen3-max-preview
          provider: langgenius/tongyi/tongyi
        prompt_template:
        - id: cea6f2ab-4de6-457a-bec7-e54547fb78cd
          role: system
          text: 'ä½ æ˜¯æ•°æ®åˆ†æä¸“å®¶ã€‚åˆ†æJSONæ ¼å¼çš„SQLæŸ¥è¯¢ç»“æœï¼Œå›ç­”ç”¨æˆ·é—®é¢˜ã€‚


            å…³å¥è§„åˆ™ï¼š

            1. æ‰€æœ‰æ•°æ®å·²ç¬¦åˆç”¨æˆ·é—®é¢˜ä¸­çš„æ¡ä»¶

            2. ç›´æ¥ä½¿ç”¨æä¾›çš„æ•°æ®åˆ†æï¼Œä¸è´¨ç–‘æ•°æ®æ˜¯å¦ç¬¦åˆæ¡ä»¶

            3. ä¸éœ€å†æ¬¡ç­›é€‰æˆ–ç¡®è®¤æ•™æ®ç±»åˆ«/æ—¶é—´èŒƒå›´

            4. æ•°æ®ä¸º[]æˆ–ç©ºæ—¶ï¼Œå›å¤â€œæ²¡æœ‰æŸ¥è¯¢åˆ°ç›¸å…³æ•°æ®â€ï¼Œä¸å¾—ç¼–é€ æ•°æ®

            5. ç”¨ç®€ä½“ä¸­æ–‡ï¼Œä¸è¦å‡ºç°ç¹ä½“å­—

            6. è¾“å‡ºçš„å„å­—æ®µæ•°æ®è¦ä¿è¯å’Œè¿”å›çš„æ•°æ®ä¸€è‡´'
        - id: dd0ec2d6-b660-4777-af96-6ea786c65e86
          role: user
          text: 'æ•°æ®æ˜¯ï¼š{{#1754668210206.result#}}

            é—®é¢˜æ˜¯ï¼š{{#1754668187888.query#}}

            å›ç­”è¦æ±‚ï¼š

            1.åˆ—å‡ºè¯¦ç»†æ•°æ®ï¼Œï¼Œä¼˜å…ˆä»¥è¡¨æ ¼æ–¹å¼åˆ—å‡ºæ•°æ®ï¼Œå¦‚æœæ•°æ®è¶…è¿‡10æ—¶ï¼Œé™¤éç”¨æˆ·é—®é¢˜ä¸­åŒ…å«æ˜ç¡®è¦æ±‚åˆ—å‡ºå…¨éƒ¨æ•°æ®çš„æƒ…å½¢å¤–ï¼Œä½ åªéœ€è¦éšæœºåˆ—å‡º5ç³»æœ‰ä»£è¡¨æ€§çš„çš„è®°å½•ï¼Œå¦åˆ™éœ€è¦åˆ—å‡ºå…¨éƒ¨è®°å½•

            2.å½“æœ‰è®°å½•æŠ«çœç•¥æ—¶ï¼Œå¿…é¡»ä½œå‡ºè¯´æ˜

            3.å¯¹æ•°æ®è¿›è¡Œæ¦‚è§ˆå’Œæ€»ç»“

            4.è¯†åˆ«è¶‹åŠ¿ã€å¼‚å¸¸ï¼Œå¹¶æä¾›åˆ†æå’Œå»ºè®®

            5.åˆ†æSQLè¯­å¥ {{#1754668203944.text#}}ä¸ç”¨æˆ·çš„é—®é¢˜æ˜¯å¦åŒ¹é…å¹¶è¾“å‡ºåˆ†æç»“æœ

            6.æœ€ååŸæ–‡é™„ä¸ŠSQLè¯­å¥


            æ•°æ®å¤„ç†ï¼š

            - æˆ¿ä»·ã€‚å•ä½ï¼šä¸‡

            - å¤§å°ã€‚å•ä½ï¼šå¹³ç±³ï¼Œ

            - å•ä»·ã€‚å•ä½ï¼šå…ƒ

            - ä½¿ç”¨è¿å·è®¡æ•°æ³•ï¼š1,234,567

            - å…¶ä»–æ•°å€¼ä¿ç•™2ä½å°æ•°

            - å¯¹äºæ¯”ä¾‹ã€å æ¯”ä»¥åŠå«ä¹‰ç±»ä¼¼çš„å­—æ®µï¼Œæ˜¾ç¤ºä¸ºç™¾åˆ†æ¯”ï¼Œ

            ä¾‹å¦‚ï¼šå°†0.1236æ˜¾ç¤ºä¸º12.36%ï¼Œä¿ç•™ä¸¤ä½å°æ•°

            - ç¡®ä¿ä½¿ç”¨äº†æ­£ç¡®çš„markdownè¯­æ³•ï¼Œç‰¹åˆ«æ˜¯æ ‡é¢˜å’Œè¡¨æ ¼


            æ³¨æ„ï¼š

            - ä¸è¦è¾“å‡ºä¸­é—´çš„åˆ†æè¿‡ç¨‹å’Œè®¡ç®—æ–¹æ³•ï¼Œåªéœ€è¦æŒ‰è¦æ±‚è¾“å‡ºç»“æœå³å¯

            - è®¤çœŸæ£€æŸ¥æ˜¯å¦æŒ‰ç…§è¦æ±‚çš„æ ¼å¼æ­£ç¡®æ˜¾ç¤ºäº†æ•°æ®{{#1754668210206.result#}}'
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1754668216463'
      position:
        x: 942.9920634920636
        y: 245
      positionAbsolute:
        x: 942.9920634920636
        y: 245
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1754668216463'
          - text
          variable: text
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1754668220799'
      position:
        x: 1246
        y: 245
      positionAbsolute:
        x: 1246
        y: 245
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: -180.44399999999996
      y: 48.67999999999995
      zoom: 1.008
